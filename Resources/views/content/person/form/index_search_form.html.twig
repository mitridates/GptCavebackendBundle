{#
/**
 * @file index_search_form.html.twig
 * Formulario de búsqueda
 *
 * @parent ../index.html.twig
  */
#}
{% form_theme form '@GptCavebackend/symfony/fields.html.twig' %}
{# onsubmit #}
{%set submit%}Grot('#{{attr.pager.id}}').loader('form', '#{{form.vars.attr.id}}',
    {},
    {
        before: function(){
            $('#form-notification').html('').hide();
        },
        error: function(data){
            (new Grot.mustache('form-notification', 'mst-form-error' )).show(data);
        }
    }); return false;{%endset%}

{{ form_start(form, {'attr': {'onsubmit': submit , 'autocomplete': 'off'} } ) }}

{% embed '@GptCavebackend/partial/page/panel.html.twig' with {type: arrayParams.page.style.search_panel}%}
{% block heading %}
{{ 'person.index.search.form'|trans({},'cavepages')|raw -}}
{% endblock heading %}
{% block body %}
    <!-- buscador básico -->
<table class="table table-bordered">
    <tr>
        <td class="col-lg-3">{{ form_label(form.name)}}</td>
        <td>{{ form_label(form.surname)}}</td>
        <td><label>{{ 'organisation'|trans({},'cavemessages')|capitalize|raw -}}</label></td>
        <td></td>
    </tr>
    <tr>
        <td>{{ form_widget(form.name) }}</td>
        <td>{{ form_widget(form.surname) }}</td>
        <td>{{ form_widget(form.organisation1) }}</td>
        <td class="text-center col-lg-2">
            {%include '@GptCavebackend/partial/form/buttons.html.twig'
            with {'btns' :
            {
            'search': {'type': 'submit', 'icon': {'class': 'search'} },
            'clear': {'attr': { 'onclick': 'Grot(\'#'~form.vars.attr.id~'\').form(\'clear\');' } }
            },
            } only %}
        </td>
    </tr>
</table>

{#2 - Org country, admin1, admin2 #}
<table class="table table-bordered">
    <tr>
        <td>{{ form_label(form.country) }}</td>
        <td>{{ 'government.level.admin2'|trans({},'cavemessages')|capitalize|raw}}</td>
        <td>{{ 'government.level.admin3'|trans({},'cavemessages')|capitalize|raw}}</td>
    </tr>
    <tr>
        <td>{{ form_widget(form.country) }}</td>
        <td>{{ form_widget(form.admin2) }}</td>
        <td>{{ form_widget(form.admin3) }}</td>
    </tr>
</table>

{% endblock body %}
{% endembed %}
{{ form_widget(form._token) }}
{{ form_end(form) }}